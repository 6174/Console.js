/*!
 * Name:    Console.js
 * Info:    A simple but useful extension for the JavaScript console with a stack trace and more
 * Author:  Gabriel Nahmias (http://terrasoftlabs.com)
 * Version: 1.2
 */
(function(b){var a={settings:{debug:{alwaysShowURL:false,enabled:true,showInfo:true},stackTrace:{enabled:true,collapsed:true,ignoreDebugFuncs:true,spacing:false}}};if(!String.prototype.format){String.prototype.format=function(){var d=this.toString(),c=typeof arguments[0],c=(("string"==c||"number"==c)?arguments:arguments[0]);if(!arguments.length){return d}for(arg in c){d=d.replace(RegExp("\\{"+arg+"\\}","gi"),c[arg])}return d}}if(!String.prototype.times){String.prototype.times=function(){var e=this.toString(),c="",f=arguments[0];if(!arguments.length){return e}for(var d=0;d<f;d++){c+=e}return c}}a.debug=function(){var n=((typeof arguments!=="undefined")?Array.prototype.slice.call(arguments,0):[]),l=navigator.userAgent,i={firefox:/firefox/gi.test(l),webkit:/webkit/gi.test(l)},j=a.stackTrace().split("\n"),r,e=((i.webkit)?3:2),g="color:black;",p="color:{0}; font-weight:bold;",c="";if(i.firefox){r=j[e].replace(/(.*):/,"$1@").split("@")}else{if(i.webkit){r=j[e].replace("at ","").replace(")","").replace(/( \()/gi,"@").replace(/(.*):(\d*):(\d*)/,"$1@$2@$3").split("@")}}if(a.settings.debug.showInfo&&!a.settings.stackTrace.enabled){var k=r[0].trim(),m=r[1].trim(),m=((!a.settings.debug.alwaysShowURL&&b.location.href==m)?"this page":m),f=r[2].trim(),d;if(i.webkit){d=r[3].trim()}console.info("%cOn line %c{0}%c{1}%c{2}%c of %c{3}%c inside the %c{4}%c function:".format(f,((i.webkit)?", column ":""),((i.webkit)?d:""),m,k),g,p.format("red"),g,p.format("purple"),g,p.format("green"),g,p.format("blue"),g)}if(a.settings.stackTrace.ignoreDebugFuncs){if(i.webkit){j.shift();alert("webkit ignoring")}j.shift();j.shift()}c=j.join(((a.settings.stackTrace.spacing)?"\n\n":"\n")).trim();trace=typeof trace!=="undefined"?trace:true;if(typeof console!="undefined"&&a.settings.debug.enabled==true){for(var q in n){console.debug(n[q])}if(a.settings.stackTrace.enabled){var h="color:red; font-weight: bold;",o="%c Stack Trace"+" ".times(70);if(a.settings.stackTrace.collapsed){console.groupCollapsed(o,h)}else{console.group(o,h)}console.debug("%c"+c,"color: #666666; font-style: italic;");console.groupEnd()}}};a.stackTrace=function(){var c=new Error();return c.stack};b.Console=a})(window);